$(function(){var options={html4mode:!0,proximity:{near:300,far:-100}};seoify.init(options)});var seoify=function(){return{init_title:null,init_meta:null,root_url:null,base_url:null,init_path:"",active_state:null,isloaded:!1,wait:!0,proximity:{near:400,far:-100},html4Mode:!0,init:function(options){options&&options.html4mode?History.options.html4Mode=options.html4mode:options&&options.proximity&&(this.proximity=options.proximity),window.History.init(),this.load()},load:function(){this.init_title=$("title").text(),this.init_meta=$('meta[name="description"]').attr("content"),this.root_url=History.getRootUrl(),this.base_url=History.getBasePageUrl(),this.init_path="/"+this.base_url.replace(this.root_url,""),this.active_state=History.getState().hash;var self=this;History.Adapter.bind(window,"statechange",function(){self.active_state=History.getState().hash}),this.setup()},setup:function(){var self=this,seoifyElements=$("body *[data-seoify]");$(seoifyElements).each(function(){var element=$(this),title=element.attr("data-title"),meta=element.attr("data-meta"),urlslug=self.init_path+element.attr("data-seoify");self.store(urlslug,title,meta,element)});setTimeout(function(){self.wait=!1},1e3)},store:function(urlslug,title,meta,element){if(!this.isloaded){var init_state=History.getState().hash.replace("#/","").replace("/",""),current_hash=this.init_path+init_state;current_hash==urlslug&&(this.scrolltoElement(element),this.isloaded=!0)}this.watch(element,urlslug,title,meta)},watch:function(element,urlslug,title,meta){var self=this;$(window).scroll(function(){var elementpos=$(element).offset().top-$(window).scrollTop(),checkpos=elementpos<self.proximity.near&&elementpos>self.proximity.far;if(checkpos){clearTimeout(seoify_eventBuffer);var seoify_eventBuffer=setTimeout(function(){self.setpushState(urlslug,title,meta)},5)}})},setpushState:function(slug,title,meta){this.active_state==slug||this.wait||(this.active_state=slug,slug==this.init_path?(window.history.replaceState(null,this.init_title,this.base_url),this.setMetaDescription(this.init_meta)):(History.pushState(null,title,slug),this.setMetaDescription(meta)))},setMetaDescription:function(meta){$('meta[name="description"]').attr("content",meta)},scrolltoElement:function(element){$(element).ScrollTo()}}}(seoify);